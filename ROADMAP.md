# InspoBox 开发路线图

> 基于 SDD 规范的下一步开发规划

## 📊 当前项目状态

| 功能模块 | 状态 | 说明 |
|---------|------|------|
| 用户认证 | ✅ 完成 | 多用户、数据隔离 |
| 灵感捕捉 | ✅ 完成 | 全屏输入、故事/标签关联 |
| 故事管理 | ✅ 完成 | CRUD、颜色标识 |
| 标签系统 | ✅ 完成 | 多标签、筛选 |
| AI 分析 | ✅ 完成 | 通义千问、流式响应 |
| Studio | ✅ 完成 | 瀑布流、批量操作 |
| SDD 规范 | ✅ 完成 | OpenAPI、数据库、架构规范 |

---

## 🎯 Phase 1: 核心体验增强 (建议优先)

### 1.1 搜索功能 🔍
**价值**: 灵感积累多了之后，搜索是刚需

**功能点**:
- 全局搜索（内容、故事名、标签名）
- 实时搜索建议
- 搜索结果高亮
- 搜索历史

**技术方案**:
```typescript
// 新增 API
POST /api/search
{
  "query": "时间旅行",
  "filters": {
    "story_id": "uuid",
    "tag_ids": ["uuid"],
    "date_range": ["2024-01-01", "2024-12-31"]
  }
}
```

**估算**: 2-3 天

---

### 1.2 批量编辑功能 📦
**价值**: 提高整理效率

**功能点**:
- 批量移动到故事
- 批量添加/移除标签
- 批量删除（已有基础，可增强）
- 拖拽排序（已有 @dnd-kit）

**UI 设计**:
```
Studio 编辑模式增强:
┌─────────────────────────────────────┐
│ [ ] 选择全部  已选 12 个             │
│                                     │
│ [移动到故事 ▼] [添加标签 ▼] [删除]   │
└─────────────────────────────────────┘
```

**估算**: 1-2 天

---

### 1.3 数据导出/导入 💾
**价值**: 数据安全、备份、迁移

**功能点**:
- 导出为 Markdown（按故事组织）
- 导出为 JSON（完整数据）
- 导入 JSON 恢复数据
- 自动备份（可选）

**导出格式示例**:
```markdown
# 时间循环之谜

## 标签: #科幻 #时间旅行

### 2024-01-15
手表每次回到昨天早上8点...

### 2024-01-16
主角发现只有在雨天才会触发...
```

**估算**: 2 天

---

## 🎨 Phase 2: 用户体验优化

### 2.1 时间线/日历视图 📅
**价值**: 按时间回顾创作历程

**功能点**:
- 日历视图（灵感密度热力图）
- 时间线视图（类似 GitHub contributions）
- 按日期筛选
- "历史上的今天"回顾

**技术方案**:
```typescript
// 新增 API
GET /api/fragments/timeline?year=2024&month=1

Response:
{
  "2024-01-01": 3,
  "2024-01-15": 5,  // 数字表示当天灵感数
  ...
}
```

**估算**: 3-4 天

---

### 2.2 统计面板 📈
**价值**: 数据可视化，创作成就感

**功能点**:
- 总灵感数、故事数、标签数
- 创作趋势图
- 最常使用的标签
- 最活跃的故事
- 字数统计

**UI 位置**: Studio 页面添加统计 Tab

**估算**: 2 天

---

### 2.3 键盘快捷键 ⌨️
**价值**: 提升操作效率

**快捷键设计**:
| 快捷键 | 功能 |
|--------|------|
| `/` 或 `Cmd+K` | 打开搜索 |
| `n` | 新建灵感 |
| `e` | 进入/退出编辑模式 |
| `?` | 显示快捷键帮助 |
| `Esc` | 取消/关闭 |

**估算**: 1 天

---

### 2.4 PWA 支持 📱
**价值**: 移动端体验优化

**功能点**:
- Service Worker
- 离线缓存
- 添加到主屏
- 移动端触摸优化

**估算**: 2 天

---

## 🚀 Phase 3: 高级功能

### 3.1 碎片关联 🔗
**价值**: 建立灵感间的联系

**功能点**:
- 手动关联相关碎片
- 关联图谱可视化
- AI 自动推荐关联

**数据库变更**:
```sql
CREATE TABLE fragment_links (
  source_id UUID REFERENCES fragments(id),
  target_id UUID REFERENCES fragments(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  PRIMARY KEY (source_id, target_id)
);
```

**估算**: 4-5 天

---

### 3.2 协作分享 🤝
**价值**: 团队协作、分享创作

**功能点**:
- 生成分享链接（只读）
- 邀请协作者（编辑权限）
- 评论功能
- 版本历史

**估算**: 5-7 天

---

### 3.3 Webhook/集成 🔌
**价值**: 与其他工具连接

**功能点**:
- Webhook 推送新灵感
- Notion 集成（导出到 Notion）
- Flomo/Readwise 导入
- Zapier 支持

**估算**: 3-4 天

---

## 📋 推荐执行顺序

### 方案 A: 快速增强 (2 周)
适合想快速提升核心体验的场景

1. **Week 1**: 搜索功能 + 批量编辑
2. **Week 2**: 数据导出 + 键盘快捷键

### 方案 B: 体验优化 (1 个月)
适合注重用户体验的场景

1. **Week 1**: 搜索 + 批量编辑
2. **Week 2**: 统计面板 + 日历视图
3. **Week 3**: 数据导出/导入 + PWA
4. **Week 4**: 键盘快捷键 + 碎片关联

### 方案 C: 功能完整 (2 个月)
适合产品化、对外发布的场景

在上述基础上增加协作分享、Webhook 集成等高级功能

---

## 🛠️ 每个功能的 SDD 流程

对于每个新功能，按照以下流程：

```
1. 更新 OpenAPI 规范
   └── spec/openapi.yaml

2. 更新数据库 Schema (如需要)
   └── spec/database.schema.sql
   └── supabase/migrations/

3. 更新架构文档
   └── spec/architecture.md

4. 生成类型
   └── npx openapi-typescript

5. 实现代码
   └── src/app/api/*
   └── src/lib/supabase.ts
   └── src/components/*

6. 编写测试
   └── __tests__/*

7. 验证
   └── node spec/validate.js
```

---

## 💡 下一步建议

根据项目当前状态，我最推荐先实现 **搜索功能**，原因：

1. **刚需**: 当灵感积累到几十个后，没有搜索很难找到
2. **独立性强**: 不影响现有功能，可独立开发
3. **用户价值高**: 大幅提升使用体验
4. **技术成熟**: PostgreSQL 全文搜索或 Algolia 都有成熟方案

要我帮你开始实现搜索功能吗？我可以：
1. 更新 SDD 规范（OpenAPI + 数据库）
2. 创建搜索 API
3. 实现前端搜索界面
